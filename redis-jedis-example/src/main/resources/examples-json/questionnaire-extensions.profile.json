{
    "resourceType": "Profile",
    "text": {
        "status": "generated",
        "div": "<div>to do</div>"
    },
    "url": "http://hl7.org/fhir/Profile/questionnaire-extensions",
    "name": "Core extensions for Questionnaire",
    "publisher": "HL7",
    "telecom": [
        {
            "system": "url",
            "value": "http://www.hl7.org"
        }
    ],
    "description": "Contains standard extensions for Questionnaire, amongst others for validation",
    "status": "draft",
    "date": "2013-07-04",
    "mapping": [
        {
            "identity": "rim",
            "uri": "http://hl7.org/v3",
            "name": "RIM"
        }
    ],
    "extensionDefn": [
        {
            "code": "category",
            "display": "What kind of questionnaire?",
            "contextType": "resource",
            "context": [
                "Questionnaire"
            ],
            "element": [
                {
                    "path": "category",
                    "definition": {
                        "short": "What kind of questionnaire?",
                        "formal": "A code that identifies the questionnaire as falling into a particular group of like questionnaires.  E.g. \"Pediatric\", \"Admissions\", \"Research\", \"Demographic\", \"Opinion Survey\", etc.",
                        "min": 0,
                        "max": "1",
                        "type": [
                            {
                                "code": "CodeableConcept"
                            }
                        ],
                        "mustSupport": false,
                        "isModifier": false,
                        "binding": {
                            "name": "QuestionnaireCategory",
                            "isExtensible": true,
                            "description": "Classifications for questionnaires.  Can include such concepts as \"intake form\", \"opinion survey\", \"clinical research questionnaire\", \"pediatric\", etc."
                        },
                        "mapping": [
                            {
                                "identity": "rim",
                                "map": "./inboundRelationship[typeCode=SUBJ]/act[classCode=LIST, moodCode=EVN]/code"
                            }
                        ]
                    }
                }
            ]
        },
        {
            "code": "label",
            "display": "E.g. \"1(a)\", \"2.5.3\"",
            "contextType": "resource",
            "context": [
                "Questionnaire.group",
                "Questionnaire.group.group",
                "Questionnaire.group.question"
            ],
            "element": [
                {
                    "path": "label",
                    "definition": {
                        "short": "E.g. \"1(a)\", \"2.5.3\"",
                        "formal": "A label for a particular group or question within the questionnaire.",
                        "comments": "These are generally unique within a questionnaire, though this is not guaranteed. Some questionnaires may have multiple questions with the same label with logic to control which gets exposed.",
                        "min": 0,
                        "max": "1",
                        "type": [
                            {
                                "code": "string"
                            }
                        ],
                        "mustSupport": false,
                        "isModifier": false,
                        "mapping": [
                            {
                                "identity": "rim",
                                "map": "Not supported"
                            }
                        ]
                    }
                }
            ]
        },
        {
            "code": "minOccurs",
            "display": "Minimum repetitions",
            "contextType": "resource",
            "context": [
                "Questionnaire.group",
                "Questionnaire.group.group",
                "Questionnaire.group.question"
            ],
            "element": [
                {
                    "path": "minOccurs",
                    "definition": {
                        "short": "Minimum repetitions",
                        "formal": "The minimum number of times the group must appear or the minimum number of answers for a question - when greater than 1.",
                        "comments": "Default assumption for \"required\" elements is minOccurs=1.",
                        "min": 0,
                        "max": "1",
                        "type": [
                            {
                                "code": "integer"
                            }
                        ],
                        "mustSupport": false,
                        "isModifier": false,
                        "mapping": [
                            {
                                "identity": "rim",
                                "map": "N/A - MIF rather than RIM level"
                            }
                        ]
                    }
                }
            ]
        },
        {
            "code": "maxOccurs",
            "display": "Maximum repetitions",
            "contextType": "resource",
            "context": [
                "Questionnaire.group",
                "Questionnaire.group.group",
                "Questionnaire.group.question"
            ],
            "element": [
                {
                    "path": "maxOccurs",
                    "definition": {
                        "short": "Maximum repetitions",
                        "formal": "The maximum number of times the group must appear or the minimum number of answers for a question - when greater than 1 and not unlimited.",
                        "comments": "Only relevant if the element has repeats=true and there's a need to constrain the number of allowed repetitions.",
                        "min": 0,
                        "max": "1",
                        "type": [
                            {
                                "code": "integer"
                            }
                        ],
                        "mustSupport": false,
                        "isModifier": false,
                        "mapping": [
                            {
                                "identity": "rim",
                                "map": "N/A - MIF rather than RIM level"
                            }
                        ]
                    }
                }
            ]
        },
        {
            "code": "hidden",
            "display": "Don't display to user",
            "contextType": "resource",
            "context": [
                "Questionnaire.group",
                "Questionnaire.group.group",
                "Questionnaire.group.question"
            ],
            "element": [
                {
                    "path": "hidden",
                    "definition": {
                        "short": "Don't display to user",
                        "formal": "If true, indicates that the containing group or question should not be displayed to the user for data entry.",
                        "comments": "Some questionnaires may have questions that represent calculated values or internal \"fixed\" metadata.  These elements need to be included with the answers, but should not be displayed to the user.",
                        "min": 0,
                        "max": "1",
                        "type": [
                            {
                                "code": "boolean"
                            }
                        ],
                        "mustSupport": false,
                        "isModifier": false
                    }
                }
            ]
        },
        {
            "code": "enableWhen",
            "display": "Only allow data when:",
            "contextType": "resource",
            "context": [
                "Questionnaire.group",
                "Questionnaire.group.group",
                "Questionnaire.group.question"
            ],
            "element": [
                {
                    "path": "enableWhen",
                    "definition": {
                        "short": "Only allow data when:",
                        "formal": "If present, indicates that the group or question containing the extension should only be enabled (allow an answer to be present and, in most circumstances, even be visible to the user) when the specified condition is true.",
                        "comments": "Allows questionnaires to adapt based on answers to prior questions.  E.g. If physical gender is specified as a male, no need to capture pregnancy history.",
                        "min": 0,
                        "max": "*",
                        "mustSupport": false,
                        "isModifier": false
                    }
                },
                {
                    "path": "enableWhen.question",
                    "definition": {
                        "short": "Question that must be answered",
                        "formal": "The linkId for the question whose answer must be present in order for the \"enable\" to be triggered.",
                        "min": 1,
                        "max": "1",
                        "type": [
                            {
                                "code": "string"
                            }
                        ],
                        "mustSupport": false,
                        "isModifier": false
                    }
                },
                {
                    "path": "enableWhen.answer",
                    "definition": {
                        "short": "Value question must have",
                        "formal": "If present, then the specified question must match the specified answer for all components present in the enableWhen.answer.",
                        "min": 0,
                        "max": "1",
                        "type": [
                            {
                                "code": "*"
                            }
                        ],
                        "mustSupport": false,
                        "isModifier": false
                    }
                }
            ]
        },
        {
            "code": "defaultValue",
            "display": "Initial presumed answer for question",
            "contextType": "resource",
            "context": [
                "Questionnaire.group.question"
            ],
            "element": [
                {
                    "path": "defaultValue",
                    "definition": {
                        "short": "Initial presumed answer for question",
                        "formal": "This is the value that should be pre-populated when rendering the questionnaire for user input.",
                        "min": 0,
                        "max": "1",
                        "type": [
                            {
                                "code": "*"
                            }
                        ],
                        "mustSupport": false,
                        "isModifier": false,
                        "mapping": [
                            {
                                "identity": "rim",
                                "map": "N/A - MIF rather than RIM level"
                            }
                        ]
                    }
                }
            ]
        },
        {
            "code": "defaultAsFixed",
            "display": "Treat default as fixed value?",
            "contextType": "resource",
            "context": [
                "Questionnaire.group.question"
            ],
            "element": [
                {
                    "path": "defaultAsFixed",
                    "definition": {
                        "short": "Treat default as fixed value?",
                        "formal": "If true, the default value is set as a fixed \"answer\" for the question.",
                        "min": 0,
                        "max": "1",
                        "type": [
                            {
                                "code": "boolean"
                            }
                        ],
                        "mustSupport": false,
                        "isModifier": false,
                        "mapping": [
                            {
                                "identity": "rim",
                                "map": "N/A - MIF rather than RIM level"
                            }
                        ]
                    }
                }
            ]
        },
        {
            "code": "deReference",
            "display": "Implemented CDE",
            "contextType": "resource",
            "context": [
                "Questionnaire.group.question"
            ],
            "element": [
                {
                    "path": "deReference",
                    "definition": {
                        "short": "Implemented CDE",
                        "formal": "A reference to the Data Element that corresponds to the question text and answer constraints for this question.",
                        "comments": "If a code applies to a question, that code should still be conveyed on the question, even if the same code is also referenced as a DataElement.code in the referenced data element.  This extension must not be used in place of specifying the Questionnaire.group.question.concept element.",
                        "min": 0,
                        "max": "1",
                        "type": [
                            {
                                "code": "Resource",
                                "profile": "http://hl7.org/fhir/Profile/DataElement"
                            }
                        ],
                        "mustSupport": false,
                        "isModifier": false,
                        "mapping": [
                            {
                                "identity": "rim",
                                "map": "./outboundRelationship[typeCode=INST]/target[classCode=OBS, moodCode=DEFN]"
                            }
                        ]
                    }
                }
            ]
        },
        {
            "code": "allowedResource",
            "display": "Allowed resource for reference",
            "contextType": "resource",
            "context": [
                "Questionnaire.group.question"
            ],
            "element": [
                {
                    "path": "allowedResource",
                    "definition": {
                        "short": "Allowed resource for reference",
                        "formal": "Where the type for a question is \"Reference\", indicates a type of resource that is permitted.",
                        "comments": "This extension only has meaning if the question.type = Reference.  If no allowedResource extensions are present, the presumption is that any type of resource is permitted.  If multiple are present, then any of the specified types are permitted.",
                        "min": 0,
                        "max": "*",
                        "type": [
                            {
                                "code": "code"
                            }
                        ],
                        "mustSupport": false,
                        "isModifier": false,
                        "binding": {
                            "name": "ResourceType",
                            "isExtensible": false,
                            "conformance": "required",
                            "description": "One of the resource types defined as part of FHIR",
                            "referenceResource": {
                                "reference": "http://hl7.org/fhir/vs/resource-types"
                            }
                        }
                    }
                }
            ]
        },
        {
            "code": "mimeType",
            "display": "Type of attachment",
            "contextType": "resource",
            "context": [
                "Questionnaire.group.question"
            ],
            "element": [
                {
                    "path": "mimeType",
                    "definition": {
                        "short": "Type of attachment",
                        "formal": "Identifies the kind(s) of [[[Attachment]]] allowed to be sent in answer to the question.",
                        "comments": "This extension only has meaning if the question.type = Attachment.",
                        "min": 0,
                        "max": "*",
                        "type": [
                            {
                                "code": "code"
                            }
                        ],
                        "mustSupport": false,
                        "isModifier": false,
                        "binding": {
                            "name": "MimeType",
                            "isExtensible": false,
                            "conformance": "required",
                            "description": "The mime type of an attachment",
                            "referenceUri": "http://www.rfc-editor.org/bcp/bcp13.txt"
                        }
                    }
                }
            ]
        },
        {
            "code": "maxSize",
            "display": "Max size in MB",
            "contextType": "resource",
            "context": [
                "Questionnaire.group.question"
            ],
            "element": [
                {
                    "path": "maxSize",
                    "definition": {
                        "short": "Max size in MB",
                        "formal": "For attachment answers, indicates the maximum size an attachment provided in response to a question can be.",
                        "comments": "This extension only has meaning if the question.type = Attachment.",
                        "min": 0,
                        "max": "1",
                        "type": [
                            {
                                "code": "decimal"
                            }
                        ],
                        "mustSupport": false,
                        "isModifier": false
                    }
                }
            ]
        }
    ]
}